<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>travel | Ray</title>
<meta name="keywords" content="" />
<meta name="description" content="黑马旅游网案例 注册 &lt;script&gt; /* * 表单校验： * 1.用户名：单词字符，长度8到20位 * 2.密码：单词字符，长度8到20位 *	3.email：邮件格式 * 4.姓名：非空 * 5.手机号：手机号格式 *	6.出生日期：非空 *	7.验证码：非空 * */ function checkUsername(){ var username = $(&quot;#username&quot;).val(); var reg_username = /^\w{8,20}$/; var flag = reg_username.test(username); if(flag){ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;&quot;); }else{ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;); } return flag; }	$(function (){ //表单提交时调用所有校验方法 $(&quot;#registerForm&quot;).submit(function (){ return checkUsername() &amp;&amp; checkPassword() &amp;&amp; checkEmail() &amp;&amp; checkName() &amp;&amp; checkTelephone() &amp;&amp; checkBirthday() &amp;&amp; checkCheck(); }); //组件失去焦点时，调用对应的校验方法 $(&quot;#username&quot;).blur(checkUsername); $(&quot;#password&quot;).blur(checkPassword);//注意这里的checkPassword不要加括号 $(&quot;#email&quot;).blur(checkEmail); $(&quot;#name&quot;).">
<meta name="author" content="Ray">
<link rel="canonical" href="https://zyooo.github.io/javadairy/example/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.61dfb3f0b4cda95d2ccb867f9a3b244ce5d23e12492bcc3c277df594c7bc1adf.css" integrity="sha256-Yd&#43;z8LTNqV0sy4Z/mjskTOXSPhJJK8w8J331lMe8Gt8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js" integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://zyooo.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://zyooo.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://zyooo.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://zyooo.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://zyooo.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.70.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="travel" />
<meta property="og:description" content="黑马旅游网案例 注册 &lt;script&gt; /* * 表单校验： * 1.用户名：单词字符，长度8到20位 * 2.密码：单词字符，长度8到20位 *	3.email：邮件格式 * 4.姓名：非空 * 5.手机号：手机号格式 *	6.出生日期：非空 *	7.验证码：非空 * */ function checkUsername(){ var username = $(&quot;#username&quot;).val(); var reg_username = /^\w{8,20}$/; var flag = reg_username.test(username); if(flag){ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;&quot;); }else{ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;); } return flag; }	$(function (){ //表单提交时调用所有校验方法 $(&quot;#registerForm&quot;).submit(function (){ return checkUsername() &amp;&amp; checkPassword() &amp;&amp; checkEmail() &amp;&amp; checkName() &amp;&amp; checkTelephone() &amp;&amp; checkBirthday() &amp;&amp; checkCheck(); }); //组件失去焦点时，调用对应的校验方法 $(&quot;#username&quot;).blur(checkUsername); $(&quot;#password&quot;).blur(checkPassword);//注意这里的checkPassword不要加括号 $(&quot;#email&quot;).blur(checkEmail); $(&quot;#name&quot;)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zyooo.github.io/javadairy/example/" /><meta property="article:section" content="JavaDairy" />
<meta property="article:published_time" content="2021-10-13T11:03:43&#43;08:00" />
<meta property="article:modified_time" content="2021-10-13T11:03:43&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="travel"/>
<meta name="twitter:description" content="黑马旅游网案例 注册 &lt;script&gt; /* * 表单校验： * 1.用户名：单词字符，长度8到20位 * 2.密码：单词字符，长度8到20位 *	3.email：邮件格式 * 4.姓名：非空 * 5.手机号：手机号格式 *	6.出生日期：非空 *	7.验证码：非空 * */ function checkUsername(){ var username = $(&quot;#username&quot;).val(); var reg_username = /^\w{8,20}$/; var flag = reg_username.test(username); if(flag){ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;&quot;); }else{ $(&quot;#username&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;); } return flag; }	$(function (){ //表单提交时调用所有校验方法 $(&quot;#registerForm&quot;).submit(function (){ return checkUsername() &amp;&amp; checkPassword() &amp;&amp; checkEmail() &amp;&amp; checkName() &amp;&amp; checkTelephone() &amp;&amp; checkBirthday() &amp;&amp; checkCheck(); }); //组件失去焦点时，调用对应的校验方法 $(&quot;#username&quot;).blur(checkUsername); $(&quot;#password&quot;).blur(checkPassword);//注意这里的checkPassword不要加括号 $(&quot;#email&quot;).blur(checkEmail); $(&quot;#name&quot;)."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "travel",
      "item": "https://zyooo.github.io/javadairy/example/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "travel",
  "name": "travel",
  "description": "黑马旅游网案例 注册 \u0026lt;script\u0026gt; /* * 表单校验： * 1.用户名：单词字符，长度8到20位 * 2.密码：单词字符，长度8到20位 *\t3.email：邮件格式 * 4.姓名：非空 * 5.手机号：手机号格式 *\t6.出生日期：非空 *\t7.验证码：非空 * */ function checkUsername(){ var username = $(\u0026quot;#username\u0026quot;).val(); var reg_username = /^\\w{8,20}$/; var flag = reg_username.test(username); if(flag){ $(\u0026quot;#username\u0026quot;).css(\u0026quot;border\u0026quot;,\u0026quot;\u0026quot;); }else{ $(\u0026quot;#username\u0026quot;).css(\u0026quot;border\u0026quot;,\u0026quot;1px solid red\u0026quot;); } return flag; }\t$(function (){ //表单提交时调用所有校验方法 $(\u0026quot;#registerForm\u0026quot;).submit(function (){ return checkUsername() \u0026amp;\u0026amp; checkPassword() \u0026amp;\u0026amp; checkEmail() \u0026amp;\u0026amp; checkName() \u0026amp;\u0026amp; checkTelephone() \u0026amp;\u0026amp; checkBirthday() \u0026amp;\u0026amp; checkCheck(); }); //组件失去焦点时，调用对应的校验方法 $(\u0026quot;#username\u0026quot;).blur(checkUsername); $(\u0026quot;#password\u0026quot;).blur(checkPassword);//注意这里的checkPassword不要加括号 $(\u0026quot;#email\u0026quot;).blur(checkEmail); $(\u0026quot;#name\u0026quot;).",
  "keywords": [
    
  ],
  "articleBody": "黑马旅游网案例 注册  /* * 表单校验： * 1.用户名：单词字符，长度8到20位 * 2.密码：单词字符，长度8到20位 *\t3.email：邮件格式 * 4.姓名：非空 * 5.手机号：手机号格式 *\t6.出生日期：非空 *\t7.验证码：非空 * */ function checkUsername(){ var username = $(\"#username\").val(); var reg_username = /^\\w{8,20}$/; var flag = reg_username.test(username); if(flag){ $(\"#username\").css(\"border\",\"\"); }else{ $(\"#username\").css(\"border\",\"1px solid red\"); } return flag; }\t$(function (){ //表单提交时调用所有校验方法 $(\"#registerForm\").submit(function (){ return checkUsername() \u0026\u0026 checkPassword() \u0026\u0026 checkEmail() \u0026\u0026 checkName() \u0026\u0026 checkTelephone() \u0026\u0026 checkBirthday() \u0026\u0026 checkCheck(); }); //组件失去焦点时，调用对应的校验方法 $(\"#username\").blur(checkUsername); $(\"#password\").blur(checkPassword);//注意这里的checkPassword不要加括号 $(\"#email\").blur(checkEmail); $(\"#name\").blur(checkName); $(\"#telephone\").blur(checkTelephone); $(\"#birthday\").blur(checkBirthday); $(\"#check\").blur(checkCheck); });  异步提交表单：在此使用异步提交表单是为了获取服务器响应的数据。因为我们前台使用的是html作为视图层，不能够直接从servlet相关的域对象获取值，只能通过ajax获取响应数据\n用了一个filter解决全站的编码问题\n邮件激活 为什么要进行邮件激活？为了保证用户填写的邮箱的正确的。将来可以推广一些宣传信息，到用户邮箱中。\n发送邮件\nqq邮箱发送需要授权码登录才能成功发送\n private static final String USER = \"1972666358@qq.com\"; // 发件人称号，同邮箱地址 private static final String PASSWORD = \"xoleghbelfloefcd\"; // 如果是qq邮箱可以使户端授权码，或者登录密码 用户点击激活\n​\t登录 退出 BaseServlet抽取 要坚守Servlet的数量，现在是一个功能一个servlet，将其优化为一个模块一个servlet，相当于在数据库中一张表对应一个servlet，在servlet中提供不同的方法，完成用户的请求。\n完成方法分发\npublic class BaseServlet extends HttpServlet { @Override protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException { //完成方法分发 //1.获取请求路径 String uri = req.getRequestURI(); System.out.println(\"请求uri:\"+uri); //2.获取方法名称 String methodName = uri.substring(uri.lastIndexOf('/') + 1); System.out.println(\"方法名称：\"+methodName); //3.获取方法对象method //this 代表调用的对象 try { Method method = this.getClass().getMethod(methodName,HttpServletRequest.class, HttpServletResponse.class); method.invoke(this,req,resp); } catch (NoSuchMethodException e) { e.printStackTrace(); } catch (InvocationTargetException e) { e.printStackTrace(); } catch (IllegalAccessException e) { e.printStackTrace(); } //4.执行方法 } } 分类条目 分类数据缓存优化 使用redis缓存\n旅游线路分类 点击了不同的分类之后,将来看到的旅游路线不一样。通过分析数据库表结构，发现旅游线路表和分类表是多对一的关系。\nredis中查询score(cid) 页面得到cid 通过location.search 获取cid: split切割获得cid\n创建PageBean, RouteServlet RouteService RouteDao\n旅游线路名称查询 给搜索按钮绑定单击事件,获取输入框内容传递参数.\n",
  "wordCount" : "188",
  "inLanguage": "en",
  "datePublished": "2021-10-13T11:03:43+08:00",
  "dateModified": "2021-10-13T11:03:43+08:00",
  "author":{
    "@type": "Person",
    "name": "Ray"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://zyooo.github.io/javadairy/example/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Ray",
    "logo": {
      "@type": "ImageObject",
      "url": "https://zyooo.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://zyooo.github.io/" accesskey="h" title="Ray (Alt + H)">Ray</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://zyooo.github.io/note/" title="NOTE">
                    <span>NOTE</span>
                </a>
            </li>
            <li>
                <a href="https://zyooo.github.io/leetcodedairy/" title="LeetCodeDairy">
                    <span>LeetCodeDairy</span>
                </a>
            </li>
            <li>
                <a href="https://zyooo.github.io/bugs/" title="Bugs">
                    <span>Bugs</span>
                </a>
            </li>
            <li>
                <a href="https://zyooo.github.io/javadairy/" title="JavaDairy">
                    <span>JavaDairy</span>
                </a>
            </li>
            <li>
                <a href="https://zyooo.github.io/golangdairy/" title="GolangDairy">
                    <span>GolangDairy</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      travel<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>
    </h1>
    <div class="post-meta"><span title='2021-10-13 11:03:43 +0800 CST'>October 13, 2021</span>&nbsp;·&nbsp;Ray

</div>
  </header> 
  <div class="post-content"><h1 id="黑马旅游网案例">黑马旅游网案例<a hidden class="anchor" aria-hidden="true" href="#黑马旅游网案例">#</a></h1>
<h2 id="注册">注册<a hidden class="anchor" aria-hidden="true" href="#注册">#</a></h2>
<p><img loading="lazy" src="https://i.loli.net/2021/10/13/F2NjVgKMeyUBEhz.png" alt="image-20211013110927089"  />
</p>
<pre><code>&lt;script&gt;
			/*
			* 表单校验：
			* 	1.用户名：单词字符，长度8到20位
			* 	2.密码：单词字符，长度8到20位
			*	3.email：邮件格式
			* 	4.姓名：非空
			* 	5.手机号：手机号格式
			*	6.出生日期：非空
			*	7.验证码：非空
			* */
			function checkUsername(){
				var username = $(&quot;#username&quot;).val();
				var reg_username = /^\w{8,20}$/;
				var flag = reg_username.test(username);
				if(flag){
					$(&quot;#username&quot;).css(&quot;border&quot;,&quot;&quot;);
				}else{
					$(&quot;#username&quot;).css(&quot;border&quot;,&quot;1px solid red&quot;);
				}
				return flag;
			}			
			$(function (){
				//表单提交时调用所有校验方法
				$(&quot;#registerForm&quot;).submit(function (){
					return checkUsername() &amp;&amp; checkPassword() &amp;&amp; checkEmail() &amp;&amp; checkName()
							&amp;&amp; checkTelephone() &amp;&amp; checkBirthday() &amp;&amp; checkCheck();
				});
				//组件失去焦点时，调用对应的校验方法
				$(&quot;#username&quot;).blur(checkUsername);
				$(&quot;#password&quot;).blur(checkPassword);//注意这里的checkPassword不要加括号
				$(&quot;#email&quot;).blur(checkEmail);
				$(&quot;#name&quot;).blur(checkName);
				$(&quot;#telephone&quot;).blur(checkTelephone);
				$(&quot;#birthday&quot;).blur(checkBirthday);
				$(&quot;#check&quot;).blur(checkCheck);
			});
		&lt;/script&gt;
	

</code></pre><p><strong>异步提交表单：在此使用异步提交表单是为了获取服务器响应的数据。因为我们前台使用的是html作为视图层，不能够直接从servlet相关的域对象获取值，只能通过ajax获取响应数据</strong></p>
<p><strong>用了一个filter解决全站的编码问题</strong></p>
<h3 id="邮件激活">邮件激活<a hidden class="anchor" aria-hidden="true" href="#邮件激活">#</a></h3>
<p><strong>为什么要进行邮件激活？为了保证用户填写的邮箱的正确的。将来可以推广一些宣传信息，到用户邮箱中。</strong></p>
<p><strong>发送邮件</strong></p>
<p>qq邮箱发送需要授权码登录才能成功发送</p>
<pre><code> private static final String USER = &quot;1972666358@qq.com&quot;; // 发件人称号，同邮箱地址
 private static final String PASSWORD = &quot;xoleghbelfloefcd&quot;; // 如果是qq邮箱可以使户端授权码，或者登录密码
</code></pre><p><strong>用户点击激活</strong></p>
<p>​	<img loading="lazy" src="https://i.loli.net/2021/10/13/jXOIzDbEKQHBJcR.png" alt="image-20211013161745191"  />
</p>
<h2 id="登录">登录<a hidden class="anchor" aria-hidden="true" href="#登录">#</a></h2>
<p><img loading="lazy" src="https://i.loli.net/2021/10/13/Twykt2blq3snEUa.png" alt="image-20211013173730172"  />
</p>
<h2 id="退出">退出<a hidden class="anchor" aria-hidden="true" href="#退出">#</a></h2>
<p><img loading="lazy" src="https://i.loli.net/2021/10/13/ZQSfDyMjRuVveKC.png" alt="image-20211013204214215"  />
</p>
<h2 id="baseservlet抽取">BaseServlet抽取<a hidden class="anchor" aria-hidden="true" href="#baseservlet抽取">#</a></h2>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/V5Du8erwQ2fLaJK.png" alt="image-20211014094939241"  />
</p>
<p>要坚守Servlet的数量，现在是一个功能一个servlet，将其优化为一个模块一个servlet，相当于在数据库中一张表对应一个servlet，在servlet中提供不同的方法，完成用户的请求。</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/J5gmDUHtcLEAlVF.png" alt="image-20211014095611518"  />
</p>
<p>完成方法分发</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/jbPMxonrv8YSDck.png" alt="image-20211014100445213"  />
</p>
<pre><code>public class BaseServlet extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //完成方法分发
        //1.获取请求路径
        String uri = req.getRequestURI();
        System.out.println(&quot;请求uri:&quot;+uri);
        //2.获取方法名称
        String methodName = uri.substring(uri.lastIndexOf('/') + 1);
        System.out.println(&quot;方法名称：&quot;+methodName);
        //3.获取方法对象method
        //this 代表调用的对象
        try {
            Method method = this.getClass().getMethod(methodName,HttpServletRequest.class, HttpServletResponse.class);
            method.invoke(this,req,resp);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        //4.执行方法
    }
}
</code></pre><h2 id="分类条目">分类条目<a hidden class="anchor" aria-hidden="true" href="#分类条目">#</a></h2>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/cK3ls4oON5gPAJE.png" alt="image-20211014114407216"  />
</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/jJdhk3IQNEgPBsS.png" alt="image-20211014120828859"  />
</p>
<h3 id="分类数据缓存优化">分类数据缓存优化<a hidden class="anchor" aria-hidden="true" href="#分类数据缓存优化">#</a></h3>
<p>使用redis缓存</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/14/ivsprEYImJyT6GA.png" alt="image-20211014130855827"  />
</p>
<h2 id="旅游线路分类">旅游线路分类<a hidden class="anchor" aria-hidden="true" href="#旅游线路分类">#</a></h2>
<p>点击了不同的分类之后,将来看到的旅游路线不一样。通过分析数据库表结构，发现旅游线路表和分类表是多对一的关系。</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/16/9ZBRFk8w6xGztad.png" alt="image-20211016162556093"  />
</p>
<p>redis中查询score(cid)   页面得到cid 通过location.search  获取cid: split切割获得cid</p>
<p><img loading="lazy" src="https://i.loli.net/2021/10/16/otlUTwSVDYuvEhF.png" alt="image-20211016164429237"  />
</p>
<p>创建PageBean, RouteServlet RouteService RouteDao</p>
<h2 id="旅游线路名称查询">旅游线路名称查询<a hidden class="anchor" aria-hidden="true" href="#旅游线路名称查询">#</a></h2>
<p>给搜索按钮绑定单击事件,获取输入框内容传递参数.</p>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2021 <a href="https://zyooo.github.io/">Ray</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
