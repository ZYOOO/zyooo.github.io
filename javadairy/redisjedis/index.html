<!DOCTYPE html>
<html
  lang="en"
  dir="ltr"
  
><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Redis&amp;Jedis | JoyBoy&#39;s blog</title>

<meta name="generator" content="Hugo Eureka 0.9.1" />
<link rel="stylesheet" href="https://zyooo.github.io/css/eureka.min.6a378a23360d238dc3ef4df2f5cd718093f02c10c9c7eb2437c29701cd8d389ab6da5d9f21bdd3afa305fd56c1235017.css" integrity="sha384-ajeKIzYNI43D703y9c1xgJPwLBDJx&#43;skN8KXAc2NOJq22l2fIb3Tr6MF/VbBI1AX">
<script defer src="https://zyooo.github.io/js/eureka.min.f1639ee98d6cbd85b2b5f034d27320da962002ff83159ed4e01dbc5948c42a1ab26c2d6e74c66e93f5cec4d24dbd166d.js" integrity="sha384-8WOe6Y1svYWytfA00nMg2pYgAv&#43;DFZ7U4B28WUjEKhqybC1udMZuk/XOxNJNvRZt"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/solarized-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"
   crossorigin></script>
  <script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/languages/dart.min.js"
     crossorigin></script>


<script defer type="text/javascript" src="https://zyooo.github.io/js/fontawesome.min.1c5a4674b042785ed214cf0818a81724c6b37442fd61b0ed039237b93de25ed5103fc8079a05770648ccc9c66c4f540a.js" integrity="sha384-HFpGdLBCeF7SFM8IGKgXJMazdEL9YbDtA5I3uT3iXtUQP8gHmgV3BkjMycZsT1QK"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css"
   integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ"  media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" 
  integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY"  crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js"
   integrity="sha384-&#43;XBljXPPiv&#43;OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"  crossorigin></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ],
    });
  });
</script>


<script defer src="https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js" 
  integrity="sha384-atOyb0FxAgN9LyAc6PEf9BjgwLISyansgdH8/VXQH8p2o5vfrRgmGIJ2Sg22L0A0"  crossorigin></script>


<link rel="icon" type="image/png" sizes="32x32" href="https://zyooo.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_3.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://zyooo.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_3.png">

<meta name="description"
  content="redis&amp;Jedis redis 概念：一款高性能的NOSQL系列的非关系型数据库
关系型数据库：MySQL、Oracle…
​	使用表单存储数据，数据之间有关联关系，数据存储在硬盘的文件上
非关系型数据库(NOSQL): redis, hbase…
​	使用键值对去存储数据，数据之间没有关联关系，数据存储在内存中">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"JavaDairies",
      "item":"https://zyooo.github.io/javadairy/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"Redis\u0026Jedis",
      "item":"https://zyooo.github.io/javadairy/redisjedis/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://zyooo.github.io/javadairy/redisjedis/"
    },
    "headline": "Redis\u0026Jedis | JoyBoy\u0027s blog","datePublished": "2021-10-09T11:46:30+08:00",
    "dateModified": "2021-10-09T11:46:30+08:00",
    "wordCount":  758 ,
    "publisher": {
        "@type": "Person",
        "name": "ZhangYong",
        "logo": {
            "@type": "ImageObject",
            "url": "https://zyooo.github.io/images/avatar.png"
        }
        },
    "description": "redis\u0026amp;Jedis redis 概念：一款高性能的NOSQL系列的非关系型数据库\n关系型数据库：MySQL、Oracle…\n​\t使用表单存储数据，数据之间有关联关系，数据存储在硬盘的文件上\n非关系型数据库(NOSQL): redis, hbase…\n​\t使用键值对去存储数据，数据之间没有关联关系，数据存储在内存中"
}
</script><meta property="og:title" content="Redis&amp;Jedis | JoyBoy&#39;s blog" />
<meta property="og:type" content="article" />


<meta property="og:image" content="https://zyooo.github.io/images/icon.png">


<meta property="og:url" content="https://zyooo.github.io/javadairy/redisjedis/" />




<meta property="og:description" content="redis&amp;Jedis redis 概念：一款高性能的NOSQL系列的非关系型数据库
关系型数据库：MySQL、Oracle…
​	使用表单存储数据，数据之间有关联关系，数据存储在硬盘的文件上
非关系型数据库(NOSQL): redis, hbase…
​	使用键值对去存储数据，数据之间没有关联关系，数据存储在内存中" />




<meta property="og:locale" content="en" />




<meta property="og:site_name" content="JoyBoy&#39;s blog" />






<meta property="article:published_time" content="2021-10-09T11:46:30&#43;08:00" />


<meta property="article:modified_time" content="2021-10-09T11:46:30&#43;08:00" />



<meta property="article:section" content="JavaDairy" />





  <body class="flex min-h-screen flex-col">
    <header
      class="min-h-16 pl-scrollbar bg-secondary-bg fixed z-50 flex w-full items-center shadow-sm"
    >
      <div class="mx-auto w-full max-w-screen-xl"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
    <a href="/" class="me-6 text-primary-text text-xl font-bold">JoyBoy&#39;s blog</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="md:flex md:h-16 text-sm md:grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/#about" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">About</a>
            <a href="/note/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">Notes</a>
            <a href="/leetcodedairy/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">LeetCodeDairy</a>
            <a href="/javadairy/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  selected-menu-item  me-4">JavaDairy</a>
            <a href="/golangdairy/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">GolangDairy</a>
            <a href="/bugs/" class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2  border-transparent  me-4">Bugs</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col start-0 md:start-auto end-auto md:end-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka" name="Light">Light</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Dark">Dark</span>
                    <span class="px-4 py-1 hover:text-eureka" name="Auto">Auto</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change', switchDarkMode)
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }

    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script>
</div>
    </header>
    <main class="grow pt-16">
        <div class="pl-scrollbar">
          <div class="mx-auto w-full max-w-screen-xl lg:px-4 xl:px-8">
  
  
  <div class="grid grid-cols-2 gap-4 lg:grid-cols-8 lg:pt-12">
    <div
      class=" bg-secondary-bg col-span-2 rounded px-6 py-8 lg:col-span-6"
    >
      <article class="prose">
  <h1 class="mb-4">Redis&amp;Jedis</h1>

  <div
  class="text-tertiary-text not-prose mt-2 flex flex-row flex-wrap items-center"
>
  <div class="me-6 my-2">
    <i class="fas fa-calendar me-1"></i>
    <span
      >2021-10-09</span
    >
  </div>
  <div class="me-6 my-2">
    <i class="fas fa-clock me-1"></i>
    <span>4 min read</span>
  </div>

  

  
</div>


  
  

  <h1 id="redisjedis">redis&amp;Jedis</h1>
<h2 id="redis">redis</h2>
<p><strong>概念：一款高性能的NOSQL系列的非关系型数据库</strong></p>
<p>关系型数据库：MySQL、Oracle…</p>
<p>​	使用表单存储数据，数据之间有关联关系，数据存储在硬盘的文件上</p>
<p>非关系型数据库(NOSQL): redis, hbase…</p>
<p>​	使用键值对去存储数据，数据之间没有关联关系，数据存储在内存中</p>
<p>两种数据库并非对立而是互补，关系型用来做数据库，NOSQL用于做缓存、秒杀任务队列、网站访问统计等</p>
<p>去https://redis.io官网下载的只有Linux系统的redis，先用着黑马的Windows绿色版本，等后边部署Linux的时候再使用</p>
<p><strong>key，value； 其中key都是字符串，value有5种不同的数据结构</strong></p>
<p>value：</p>
<p>​	1.字符串类型string</p>
<p>​	2.哈希类型hash：map格式</p>
<p>​	3.列表类型list： linkedlist格式</p>
<p>​	4.集合类型set</p>
<p>​	5.有序集合类型sortedset</p>
<p><img src="https://i.loli.net/2021/10/09/pa49gX1hoAZtDJ3.png" alt="image-20211009092128312"></p>
<h3 id="命令操作-">**命令操作 **</h3>
<p><strong>(更多详细的操作在redis官网文档中有)</strong></p>
<p><strong>字符串类型 string</strong></p>
<pre><code>1. 存储： set key value
	127.0.0.1:6379&gt; set username zhangsan
	OK
2. 获取： get key
	127.0.0.1:6379&gt; get username
	&quot;zhangsan&quot;
3. 删除： del key
	127.0.0.1:6379&gt; del age
	(integer) 1
</code></pre>
<p><strong>哈希类型 hash</strong></p>
<ol>
<li>
<p>存储： hset key field value
127.0.0.1:6379&gt; hset myhash username lisi
(integer) 1
127.0.0.1:6379&gt; hset myhash password 123
(integer) 1</p>
</li>
<li>
<p>获取：</p>
<ul>
<li>hget key field: 获取指定的field对应的值
127.0.0.1:6379&gt; hget myhash username
&ldquo;lisi&rdquo;</li>
<li>hgetall key：获取所有的field和value
127.0.0.1:6379&gt; hgetall myhash
<ol>
<li>&ldquo;username&rdquo;</li>
<li>&ldquo;lisi&rdquo;</li>
<li>&ldquo;password&rdquo;</li>
<li>&ldquo;123&rdquo;</li>
</ol>
</li>
</ul>
</li>
<li>
<p>删除： hdel key field
127.0.0.1:6379&gt; hdel myhash username
(integer) 1</p>
</li>
</ol>
<p><strong>列表类型 list:可以添加一个元素到列表的头部（左边）或者尾部（右边）</strong></p>
<ol>
<li>
<p>添加：</p>
<ol>
<li>
<p>lpush key value: 将元素加入列表左表</p>
</li>
<li>
<p>rpush key value：将元素加入列表右边</p>
<p>127.0.0.1:6379&gt; lpush myList a
(integer) 1
127.0.0.1:6379&gt; lpush myList b
(integer) 2
127.0.0.1:6379&gt; rpush myList c
(integer) 3</p>
</li>
</ol>
</li>
<li>
<p>获取：</p>
<ul>
<li>lrange key start end ：范围获取
127.0.0.1:6379&gt; lrange myList 0 -1
<ol>
<li>&ldquo;b&rdquo;</li>
<li>&ldquo;a&rdquo;</li>
<li>&ldquo;c&rdquo;</li>
</ol>
</li>
</ul>
</li>
<li>
<p>删除：</p>
<ul>
<li>
<p>lpop key： 删除列表最左边的元素，并将元素返回</p>
</li>
<li>
<p>rpop key： 删除列表最右边的元素，并将元素返回</p>
</li>
</ul>
</li>
</ol>
<p><strong>集合类型 set ： 不允许重复元素</strong>
1. 存储：sadd key value
127.0.0.1:6379&gt; sadd myset a
(integer) 1
127.0.0.1:6379&gt; sadd myset a
(integer) 0
2. 获取：smembers key:获取set集合中所有元素
127.0.0.1:6379&gt; smembers myset
1) &ldquo;a&rdquo;
3. 删除：srem key value:删除set集合中的某个元素
127.0.0.1:6379&gt; srem myset a
(integer) 1</p>
<p><strong>有序集合类型 sortedset</strong>：不允许重复元素，且元素有顺序.每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p>
<ol>
<li>
<p>存储：zadd key score value
127.0.0.1:6379&gt; zadd mysort 60 zhangsan
(integer) 1
127.0.0.1:6379&gt; zadd mysort 50 lisi
(integer) 1
127.0.0.1:6379&gt; zadd mysort 80 wangwu
(integer) 1</p>
</li>
<li>
<p>获取：zrange key start end [withscores]
127.0.0.1:6379&gt; zrange mysort 0 -1</p>
<ol>
<li>&ldquo;lisi&rdquo;</li>
<li>&ldquo;zhangsan&rdquo;</li>
<li>&ldquo;wangwu&rdquo;</li>
</ol>
<p>127.0.0.1:6379&gt; zrange mysort 0 -1 withscores</p>
<ol>
<li>&ldquo;zhangsan&rdquo;</li>
<li>&ldquo;60&rdquo;</li>
<li>&ldquo;wangwu&rdquo;</li>
<li>&ldquo;80&rdquo;</li>
<li>&ldquo;lisi&rdquo;</li>
<li>&ldquo;500&rdquo;</li>
</ol>
</li>
<li>
<p>删除：zrem key value
127.0.0.1:6379&gt; zrem mysort lisi
(integer) 1</p>
</li>
</ol>
<p><strong>通用命令</strong></p>
<ol>
<li>keys * : 查询所有的键</li>
<li>type key ： 获取键对应的value的类型</li>
<li>del key：删除指定的key value</li>
</ol>
<h3 id="持久化"><strong>持久化</strong></h3>
<ol>
<li>
<p>redis是一个内存数据库，当redis服务器重启，获取电脑重启，数据会丢失，我们可以将redis内存中的数据持久化保存到硬盘的文件中。</p>
</li>
<li>
<p>redis持久化机制：</p>
<ol>
<li>
<p>RDB：默认方式，不需要进行配置，默认就使用这种机制</p>
<ul>
<li>在一定的间隔时间中，检测key的变化情况，然后持久化数据</li>
</ul>
<ol>
<li>
<p>编辑redis.windwos.conf文件</p>
<p>after 900 sec (15 min) if at least 1 key changed</p>
<p>save 900 1</p>
<p>after 300 sec (5 min) if at least 10 keys changed</p>
<p>save 300 10</p>
<p>after 60 sec if at least 10000 keys changed</p>
<p>save 60 10000</p>
</li>
<li>
<p>重新启动redis服务器，并指定配置文件名称
F:\NewStudy\JavaWeb\day23_redis\资料\redis\windows-64\redis-2.8.9\redis.windows.conf&gt;redis-server.exe redis.windows.conf</p>
</li>
</ol>
</li>
<li>
<p>AOF：日志记录的方式，可以记录每一条命令的操作。可以每一次命令操作后，持久化数据</p>
<ol>
<li>
<p>编辑redis.windwos.conf文件
appendonly no（关闭aof） &ndash;&gt; appendonly yes （开启aof）</p>
<p>appendfsync always ： 每一次操作都进行持久化</p>
<p>appendfsync everysec ： 每隔一秒进行一次持久化</p>
<p>appendfsync no	 ： 不进行持久化</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>遇到个问题：</strong> 在第一次正常启动之后，配置完conf里的save，再次开启server秒退。</p>
<p>错误信息：QForkMasterInit: system error caught. error code=0x000005af, message=VirtualAllocEx failed.: unknown error</p>
<p>**原因：**未设置redis最大内存</p>
<p>**解决：**在conf中最下面加入</p>
<pre><code>maxmemory 268435456
maxheap 314572800
</code></pre>
<p>再次启动正常</p>
<h2 id="jedis">Jedis</h2>
<pre><code>Java客户端 Jedis
	* Jedis: 一款java操作redis数据库的工具.
	* 使用步骤：
		1. 下载jedis的jar包
		2. 使用
			//1. 获取连接
    		Jedis jedis = new Jedis(&quot;localhost&quot;,6379);
   			//2. 操作
   			jedis.set(&quot;username&quot;,&quot;zhangsan&quot;);
    		//3. 关闭连接
    		jedis.close();
	* Jedis操作各种redis中的数据结构
		1) 字符串类型 string
			set
			get
			
			 //1. 获取连接
	        Jedis jedis = new Jedis();//如果使用空参构造，默认值 &quot;localhost&quot;,6379端口
	        //2. 操作
	        //存储
	        jedis.set(&quot;username&quot;,&quot;zhangsan&quot;);
	        //获取
	        String username = jedis.get(&quot;username&quot;);
	        System.out.println(username);
	
	        //可以使用setex()方法存储可以指定过期时间的 key value
	        jedis.setex(&quot;activecode&quot;,20,&quot;hehe&quot;);//将activecode：hehe键值对存入redis，并且20秒后自动删除该键值对
	
	        //3. 关闭连接
	        jedis.close();

		2) 哈希类型 hash ： map格式  
			hset
			hget
			hgetAll
			//1. 获取连接
	        Jedis jedis = new Jedis();//如果使用空参构造，默认值 &quot;localhost&quot;,6379端口
	        //2. 操作
	        // 存储hash
	        jedis.hset(&quot;user&quot;,&quot;name&quot;,&quot;lisi&quot;);
	        jedis.hset(&quot;user&quot;,&quot;age&quot;,&quot;23&quot;);
	        jedis.hset(&quot;user&quot;,&quot;gender&quot;,&quot;female&quot;);
	
	        // 获取hash
	        String name = jedis.hget(&quot;user&quot;, &quot;name&quot;);
	        System.out.println(name);
</code></pre>
<p>​</p>
<pre><code>	        // 获取hash的所有map中的数据
	        Map&lt;String, String&gt; user = jedis.hgetAll(&quot;user&quot;);
	
	        // keyset
	        Set&lt;String&gt; keySet = user.keySet();
	        for (String key : keySet) {
	            //获取value
	            String value = user.get(key);
	            System.out.println(key + &quot;:&quot; + value);
	        }
	
	        //3. 关闭连接
	        jedis.close();


		3) 列表类型 list ： linkedlist格式。支持重复元素
			lpush / rpush
			lpop / rpop
			lrange start end : 范围获取
			
			 //1. 获取连接
	        Jedis jedis = new Jedis();//如果使用空参构造，默认值 &quot;localhost&quot;,6379端口
	        //2. 操作
	        // list 存储
	        jedis.lpush(&quot;mylist&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;);//从左边存
	        jedis.rpush(&quot;mylist&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;);//从右边存
	
	        // list 范围获取
	        List&lt;String&gt; mylist = jedis.lrange(&quot;mylist&quot;, 0, -1);
	        System.out.println(mylist);
	        
	        // list 弹出
	        String element1 = jedis.lpop(&quot;mylist&quot;);//c
	        System.out.println(element1);
	
	        String element2 = jedis.rpop(&quot;mylist&quot;);//c
	        System.out.println(element2);
	
	        // list 范围获取
	        List&lt;String&gt; mylist2 = jedis.lrange(&quot;mylist&quot;, 0, -1);
	        System.out.println(mylist2);
	
	        //3. 关闭连接
	        jedis.close();


		4) 集合类型 set  ： 不允许重复元素
			sadd
			smembers:获取所有元素

			//1. 获取连接
	        Jedis jedis = new Jedis();//如果使用空参构造，默认值 &quot;localhost&quot;,6379端口
	        //2. 操作
</code></pre>
<p>​</p>
<pre><code>	        // set 存储
	        jedis.sadd(&quot;myset&quot;,&quot;java&quot;,&quot;php&quot;,&quot;c++&quot;);
	
	        // set 获取
	        Set&lt;String&gt; myset = jedis.smembers(&quot;myset&quot;);
	        System.out.println(myset);
	
	        //3. 关闭连接
	        jedis.close();
		5) 有序集合类型 sortedset：不允许重复元素，且元素有顺序
			zadd
			zrange

			//1. 获取连接
	        Jedis jedis = new Jedis();//如果使用空参构造，默认值 &quot;localhost&quot;,6379端口
	        //2. 操作
	        // sortedset 存储
	        jedis.zadd(&quot;mysortedset&quot;,3,&quot;亚瑟&quot;);
	        jedis.zadd(&quot;mysortedset&quot;,30,&quot;后裔&quot;);
	        jedis.zadd(&quot;mysortedset&quot;,55,&quot;孙悟空&quot;);
	
	        // sortedset 获取
	        Set&lt;String&gt; mysortedset = jedis.zrange(&quot;mysortedset&quot;, 0, -1);
	
	        System.out.println(mysortedset);
</code></pre>
<p>​</p>
<pre><code>	        //3. 关闭连接
	        jedis.close();
</code></pre>
<p>​</p>
<pre><code>	* jedis连接池： JedisPool
		* 使用：
			1. 创建JedisPool连接池对象
			2. 调用方法 getResource()方法获取Jedis连接
				//0.创建一个配置对象
		        JedisPoolConfig config = new JedisPoolConfig();
		        config.setMaxTotal(50);
		        config.setMaxIdle(10);
		
		        //1.创建Jedis连接池对象
		        JedisPool jedisPool = new JedisPool(config,&quot;localhost&quot;,6379);
		
		        //2.获取连接
		        Jedis jedis = jedisPool.getResource();
		        //3. 使用
		        jedis.set(&quot;hehe&quot;,&quot;heihei&quot;);
</code></pre>
<p>​			<strong>Jedis工具类</strong></p>
<pre><code>		        //4. 关闭 归还到连接池中
		        jedis.close();
		
		* 连接池工具类
			public class JedisPoolUtils {

			    private static JedisPool jedisPool;
			
			    static{
			        //读取配置文件
			        InputStream is = 				   JedisPoolUtils.class.getClassLoader().getResourceAsStream(&quot;jedis.properties&quot;);
			        //创建Properties对象
			        Properties pro = new Properties();
			        //关联文件
			        try {
			            pro.load(is);
			        } catch (IOException e) {
			            e.printStackTrace();
			        }
			        //获取数据，设置到JedisPoolConfig中
			        JedisPoolConfig config = new JedisPoolConfig();
			        config.setMaxTotal(Integer.parseInt(pro.getProperty(&quot;maxTotal&quot;)));
			        config.setMaxIdle(Integer.parseInt(pro.getProperty(&quot;maxIdle&quot;)));
			
			        //初始化JedisPool
			        jedisPool = new JedisPool(config,pro.getProperty(&quot;host&quot;),Integer.parseInt(pro.getProperty(&quot;port&quot;)));
</code></pre>
<p>​			
​</p>
<pre><code>			    }
</code></pre>
<p>​</p>
<pre><code>			    /**
			     * 获取连接方法
			     */
			    public static Jedis getJedis(){
			        return jedisPool.getResource();
			    }
			}
</code></pre>
<pre><code>#最大活动对象数     
redis.pool.maxTotal=1000    
#最大能够保持idel状态的对象数      
redis.pool.maxIdle=100  
#最小能够保持idel状态的对象数   
redis.pool.minIdle=50    
#当池内没有返回对象时，最大等待时间    
redis.pool.maxWaitMillis=10000    
#当调用borrow Object方法时，是否进行有效性检查    
redis.pool.testOnBorrow=true    
#当调用return Object方法时，是否进行有效性检查    
redis.pool.testOnReturn=true  
#“空闲链接”检测线程，检测的周期，毫秒数。如果为负值，表示不运行“检测线程”。默认为-1.  
redis.pool.timeBetweenEvictionRunsMillis=30000  
#向调用者输出“链接”对象时，是否检测它的空闲超时；  
redis.pool.testWhileIdle=true  
# 对于“空闲链接”检测线程而言，每次检测的链接资源的个数。默认为3.  
redis.pool.numTestsPerEvictionRun=50  
#redis服务器的IP    
redis.ip=xxxxxx  
#redis服务器的Port    
redis1.port=6379   
</code></pre>
<h2 id="案例">案例：</h2>
<pre><code>案例需求：
	1. 提供index.html页面，页面中有一个省份 下拉列表
	2. 当 页面加载完成后 发送ajax请求，加载所有省份


* 注意：使用redis缓存一些不经常发生变化的数据。
	* 数据库的数据一旦发生改变，则需要更新缓存。
    * 数据库的表执行 增删改的相关操作，需要将redis缓存数据情况，再次存入
    * 在service对应的增删改方法中，将redis数据删除。
</code></pre>

</article>


      

      



      

      
  <div
    class="-mx-2 mt-4 flex flex-col border-t px-2 pt-4 md:flex-row md:justify-between"
  >
    <div>
      
        <span class="text-primary-text block font-bold"
          >Previous</span
        >
        <a href="https://zyooo.github.io/javadairy/maven/" class="block">Maven</a>
      
    </div>
    <div class="mt-4 md:mt-0 md:text-right">
      
    </div>
  </div>


      



    </div>
    
      <div class="col-span-2">
        
        
          <div
  class="
    bg-primary-bg
   prose sticky top-16 z-10 hidden px-6 py-4 lg:block"
>
  <h3>On This Page</h3>
</div>
<div
  class="sticky-toc  hidden px-6 pb-6 lg:block"
>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#redisjedis">redis&amp;Jedis</a>
      <ul>
        <li><a href="#redis">redis</a>
          <ul>
            <li><a href="#命令操作-">**命令操作 **</a></li>
            <li><a href="#持久化"><strong>持久化</strong></a></li>
          </ul>
        </li>
        <li><a href="#jedis">Jedis</a></li>
        <li><a href="#案例">案例：</a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    enableStickyToc();
  });
</script>

        
      </div>
    

    
    
  </div>

  
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        hljs.initHighlightingOnLoad();
      });
    </script>

          </div>
        </div>
      
    </main>
    <footer class="pl-scrollbar">
      <div class="mx-auto w-full max-w-screen-xl"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2021 <a href="https://www.wangchucheng.com/">WANG Chucheng</a> and <a href="https://www.ruiqima.com/">MA Ruiqi</a>
 &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
    </footer>
  </body>
</html>
